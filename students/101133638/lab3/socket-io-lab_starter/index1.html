<!doctype html>
<html>

<head>
  <title>Socket.io</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
</head>

<body>

  <script src="/socket.io/socket.io/js"></script>
  <script>

    var socket;

    $(document).ready(function () {
      console.log("ready!");
      //make connection
      socket = io.connect('http://localhost:3000');
    });


    $(function () {

      socket.on('send message', function (msg) {
        console.log('message sent ...');
        socket.send('message from client')
      });

      socket.emit('disconnect', function () {
        console.log('disconnected ...')
      });
      socket.on('send', function () {
        console.log('message sent ...')
      });

    });

    // $('disconnect').click(() => {
    //   socket.connect();
    // });

    const connect = () => {
      alert('connect click');
      // console.log("ready to connect!");
    }
    const disconnect = () => {
      alert('disconnect click')
      socket.emit('disconnect', {message: 'Hello world!'});
    }
    const send = () => {
      alert('send click')
      socket.emit('send message');
    };
    
  </script>

  <h1>Socket.io Lab</h1>
  <button id="connect" onClick='connect()' />Connect</button>
  <button id="disconnect" onClick='disconnect()'>Disconnect</button>
  <button id="send" onClick='send()' />Send Message</button>
</body>

</html>